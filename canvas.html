<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <!-- SEO  -->
    <meta name="keywords" content="" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <!-- 苹果专用 -->
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="blank" />
    <meta name="format-detection" content="telephone=no" />
    <!-- 简单移动端适配 -->
   	<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no" />
    <!-- 图标 -->
	<link rel="shortcut icon" href="">
    
    <title>Canvas线条样式</title>
    <style>
    	html,body{
    		width: 100%;
    		height: 100%;
    		margin: 0;
    		padding: 0;
    		border: 0;
    	}
    	canvas{
    		border: 1px dotted black;
    		background-color: yellow;
    		margin: 0 auto;
    		display: block;
    	}
    </style>
</head>

<body>
    <canvas id="myCanvas" width="600" height="600"></canvas>
    <script>
    	var dataJSON = [
    		{
    			name:"男生",
    			value:"100"
    		},
    		{
    			name:"女生",
    			value:"300"
    		},
    		{
    			name:"妖哥",
    			value:"20"
    		},
    		{
    			name:"妖哥1",
    			value:"80"
    		},
    		{
    			name:"妖哥1",
    			value:"80"
    		},
    		{
    			name:"妖哥1",
    			value:"200"
    		},
    		{
    			name:"妖哥1",
    			value:"500"
    		}
    		
    	]
    	
    
    
    
    	var myCanvas = document.getElementById("myCanvas");
    	var ctx = myCanvas.getContext("2d");
    	
    	ctx.font = "30px 微软雅黑";
    	ctx.fillStyle = "deeppink";
    	ctx.fillText("canvas 数据统计",190,40);
    	
    	//绘制y轴
    	ctx.beginPath();
    	ctx.lineWidth=2;
    	ctx.moveTo(20,580);
    	ctx.lineTo(20,70);
    	ctx.strokeStyle = "red";
    	ctx.stroke();
    	
    	//y轴小三角
    	ctx.beginPath();
    	ctx.moveTo(20,40);
    	ctx.lineTo(10,70);
    	ctx.lineTo(30,70);
    	ctx.closePath();
    	ctx.fillStyle="black";
    	ctx.fill();
    	
    	//绘制X轴
    	ctx.beginPath();
    	ctx.lineWidth=2;
    	ctx.moveTo(20,580);
    	ctx.lineTo(580,580);
    	ctx.strokeStyle = "red";
    	ctx.stroke();
    	
    	//x轴小三角
    	ctx.beginPath();
    	ctx.moveTo(590,580);
    	ctx.lineTo(580,570);
    	ctx.lineTo(580,590);
    	ctx.closePath();
    	ctx.fillStyle="black";
    	ctx.fill();
    	
    	var tmpNum = 10;
    	for(var i=1;i<tmpNum;i++){
    		ctx.beginPath();
    		ctx.moveTo(20,580-i*50);
    		ctx.lineTo(30,580-i*50);
    		ctx.font="12px 微软雅黑";
    		ctx.fillStyle = "red";
    		ctx.fillText(i*50,35,580-i*50);
    		ctx.strokeStyle="red";
    		ctx.stroke();
    	}
    	var j=0;
    	function changeAction(){
    		var tmpDataLen = dataJSON.length;
	    	//线宽
	    	var mx = (500-10*tmpDataLen)/(2*tmpDataLen-1)+10;
	    	//间距宽度
	    	var my = (500-10*tmpDataLen)/(2*tmpDataLen-1);
	    	++j;
	    	if(j>500){
	    		clearInterval(tmptimer);
	    	}else{
	    		for(var k=0;k<tmpDataLen;k++){
		    		ctx.beginPath();
		    		ctx.moveTo(80+k*(2*my +10),580);
		    		ctx.lineTo(80+k*(2*my +10),580-j*(dataJSON[k].value)/500);
		    		ctx.lineWidth= mx;
		    		ctx.strokeStyle="red";
		    		ctx.stroke();
		    	}
	    	}
	    	
    	}
    	var tmptimer = setInterval(changeAction,10);
    	
    	
    </script>
	

</body>

</html>
